[{"id":"19af0b1e.215205","type":"function","z":"e571e1d6.1967f","name":"Global T1","func":"var data = msg.payload;\n\nglobal.set(\"QT1\",data);\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":180,"wires":[[]]},{"id":"56d53586.1787bc","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":15,"width":3,"height":3,"gtype":"donut","title":"DC Çıkış","label":"Sn","format":"{{value}}","min":0,"max":"180","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":2800,"y":360,"wires":[]},{"id":"8e4e7ba.7fa3c88","type":"function","z":"e571e1d6.1967f","name":"","func":"msg.payload = false;\n\n\n\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":2430,"y":320,"wires":[["6e6ed6f9.9c1bd8"]]},{"id":"6165427f.48196c","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":3,"width":3,"height":3,"gtype":"gage","title":"Türbin Giriş","label":"C","format":"{{value}}","min":0,"max":"150","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":870,"y":400,"wires":[]},{"id":"b67345c0.2f35f8","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":8,"width":3,"height":4,"gtype":"compass","title":"Yüksek Basınç","label":"Bar","format":"{{value}}","min":0,"max":"35","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1160,"y":780,"wires":[]},{"id":"bfb376d1.8a81e8","type":"ui_text","z":"e571e1d6.1967f","group":"8d1e776.576f488","order":11,"width":6,"height":1,"name":"","label":"Pompa","format":"{{msg.payload}}","layout":"row-spread","x":2320,"y":760,"wires":[]},{"id":"94163f3c.17faf","type":"function","z":"e571e1d6.1967f","name":"R1","func":"var deger = msg.payload[2];\n\nmsg.payload = deger;\n\nreturn msg;","outputs":1,"noerr":0,"x":2150,"y":720,"wires":[["bfb376d1.8a81e8","65d67edf.c0fc6","bc291b0d.283848"]]},{"id":"69218e85.a083a","type":"ui_text","z":"e571e1d6.1967f","group":"8d1e776.576f488","order":12,"width":6,"height":1,"name":"","label":"Türbin","format":"{{msg.payload}}","layout":"row-spread","x":2330,"y":900,"wires":[]},{"id":"6af32b30.1ed4f4","type":"function","z":"e571e1d6.1967f","name":"R2","func":"var deger = msg.payload[3];\n\nglobal.set(\"R2ONOFF\",deger);\n\nmsg.payload = deger;\n\nreturn msg;","outputs":1,"noerr":0,"x":2150,"y":840,"wires":[["69218e85.a083a","27631514.be749a","6febf8ad.2c93d8"]]},{"id":"f42fe1f0.065b8","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":19,"width":3,"height":3,"gtype":"donut","title":"Pompa","label":"Hz","format":"{{value}}","min":0,"max":"50","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":880,"y":1020,"wires":[]},{"id":"fdfbbcc6.5076e","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":10,"width":3,"height":4,"gtype":"compass","title":"Hedeflenen","label":"Bar","format":"{{value}}","min":0,"max":"35","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":870,"y":920,"wires":[]},{"id":"d6eeedbe.9e799","type":"switch","z":"e571e1d6.1967f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":2270,"y":400,"wires":[["9d27b0d0.4e303"]]},{"id":"fcc8e5af.be79e8","type":"switch","z":"e571e1d6.1967f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":2270,"y":320,"wires":[["8e4e7ba.7fa3c88"]]},{"id":"c5705bde.e71d68","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":9,"width":3,"height":4,"gtype":"compass","title":"Kabul Edilen","label":"Bar","format":"{{value}}","min":0,"max":"35","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":870,"y":820,"wires":[]},{"id":"8cee296b.2029b8","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":16,"width":3,"height":3,"gtype":"donut","title":"ACİL STOP","label":"Sn","format":"{{value}}","min":0,"max":"180","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":2750,"y":520,"wires":[]},{"id":"403c1a2e.156214","type":"function","z":"e571e1d6.1967f","name":"","func":"msg.payload = false;\n\n\n\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":2450,"y":560,"wires":[["f97b7f48.f3a1f"]]},{"id":"457e4f32.dd5a7","type":"switch","z":"e571e1d6.1967f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":2290,"y":480,"wires":[["33630981.20c906"]]},{"id":"7ed156f7.a73158","type":"switch","z":"e571e1d6.1967f","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":2290,"y":560,"wires":[["403c1a2e.156214"]]},{"id":"6b2540a1.a9641","type":"ui_button","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":13,"width":3,"height":1,"passthru":false,"label":"START","tooltip":"","color":"","bgcolor":"green","icon":"","payload":"true","payloadType":"bool","topic":"","x":1560,"y":1380,"wires":[["b67cab7b.3968a8"]]},{"id":"602e1cec.53d294","type":"ui_button","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":14,"width":3,"height":1,"passthru":false,"label":"STOP","tooltip":"","color":"","bgcolor":"Crimson ","icon":"","payload":"true","payloadType":"bool","topic":"","x":1570,"y":1460,"wires":[["e62d1e61.1958c"]]},{"id":"b67cab7b.3968a8","type":"modbus-write","z":"e571e1d6.1967f","name":"START","showStatusActivities":false,"showErrors":false,"unitid":"5","dataType":"Coil","adr":"19","quantity":"1","server":"baa950a9.8ec34","x":2000,"y":1380,"wires":[[],[]]},{"id":"e62d1e61.1958c","type":"modbus-write","z":"e571e1d6.1967f","name":"STOP","showStatusActivities":false,"showErrors":false,"unitid":"5","dataType":"Coil","adr":"20","quantity":"1","server":"baa950a9.8ec34","x":1990,"y":1460,"wires":[[],[]]},{"id":"751e4c4b.2a8434","type":"function","z":"e571e1d6.1967f","name":"Timer Değişkenler","func":"global.set('Start5dk',0);\nglobal.set('Mars5dk',0);\nglobal.set('Dc2dk',0);\nglobal.set('Alarm3dk',0);\nglobal.set('sayac1',0);\nglobal.set('sayac2',0);\nglobal.set('sayac3',0);\nglobal.set('sayac4',0);\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":260,"wires":[[]]},{"id":"8fcc2a3a.6e96f8","type":"inject","z":"e571e1d6.1967f","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":2310,"y":260,"wires":[["751e4c4b.2a8434"]]},{"id":"9d27b0d0.4e303","type":"function","z":"e571e1d6.1967f","name":"","func":"msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":2430,"y":400,"wires":[["6e6ed6f9.9c1bd8"]]},{"id":"6e6ed6f9.9c1bd8","type":"function","z":"e571e1d6.1967f","name":"","func":"var timer1 = msg.payload;\nvar timer5dk1 = global.get('Start5dk');\nvar sayac=global.get('sayac2');\nif (timer1 === true){\n    \n sayac=sayac+ 1;\n\n global.set('Start5dk',sayac);\n    \n    \n}else if(timer1 === false){\n    \n    sayac=0;\n    global.set('Start5dk',sayac);\n}\nglobal.set('sayac2',sayac);\n\nmsg.payload = timer5dk1;\nreturn msg;","outputs":1,"noerr":0,"x":2570,"y":360,"wires":[["56d53586.1787bc"]]},{"id":"33630981.20c906","type":"function","z":"e571e1d6.1967f","name":"","func":"msg.payload = true;\nreturn msg;","outputs":1,"noerr":0,"x":2450,"y":480,"wires":[["f97b7f48.f3a1f"]]},{"id":"f97b7f48.f3a1f","type":"function","z":"e571e1d6.1967f","name":"","func":"var timer1 = msg.payload;\nvar timer5dk1 = global.get('Mars5dk');\nvar sayac=global.get('sayac1');\nif (timer1 === true){\n    \n sayac=sayac+ 1;\n\n global.set('Mars5dk',sayac);\n    \n    \n}else if(timer1 === false){\n    \n    sayac=0;\n    global.set('Mars5dk',sayac);\n}\nglobal.set('sayac1',sayac);\n\nmsg.payload = timer5dk1;\nreturn msg;\n","outputs":1,"noerr":0,"x":2590,"y":520,"wires":[["8cee296b.2029b8"]]},{"id":"c73a9a1a.7dd928","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":2,"width":3,"height":3,"gtype":"gage","title":"Sıcak Su Çıkış","label":"units","format":"{{value}}","min":0,"max":"150","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":880,"y":340,"wires":[]},{"id":"60c53ebd.a8c4b","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":4,"width":3,"height":3,"gtype":"gage","title":"Türbin Çıkış","label":"C","format":"{{value}}","min":0,"max":"150","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":870,"y":460,"wires":[]},{"id":"73be4da9.0fb784","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":5,"width":3,"height":3,"gtype":"gage","title":"Pompa Çıkış","label":"C","format":"{{value}}","min":0,"max":"150","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":870,"y":520,"wires":[]},{"id":"3d26022.4e62bfe","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":6,"width":3,"height":3,"gtype":"gage","title":"Soğuk Su Çıkış","label":"C","format":"{{value}}","min":0,"max":"150","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":880,"y":580,"wires":[]},{"id":"76c9d60d.d4bd88","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":1,"width":3,"height":3,"gtype":"gage","title":"Sıcak Su Giriş","label":"C","format":"{{value}}","min":0,"max":"150","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":880,"y":220,"wires":[]},{"id":"55bd8041.f65c7","type":"inject","z":"e571e1d6.1967f","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":1930,"y":260,"wires":[["18064077.cc08e"]]},{"id":"18064077.cc08e","type":"function","z":"e571e1d6.1967f","name":"","func":"global.set(\"T1\",50);\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":260,"wires":[[]]},{"id":"3e19e9d.b10f416","type":"range","z":"e571e1d6.1967f","minin":"0","maxin":"65520","minout":"0","maxout":"50","action":"scale","round":false,"property":"payload","name":"","x":870,"y":640,"wires":[["94346a68.234848"]]},{"id":"a40e1980.2f86a8","type":"range","z":"e571e1d6.1967f","minin":"0","maxin":"65520","minout":"0","maxout":"50","action":"scale","round":false,"property":"payload","name":"","x":870,"y":700,"wires":[["13b6da48.05abe6"]]},{"id":"94346a68.234848","type":"function","z":"e571e1d6.1967f","name":"P1","func":"var data = parseFloat( (msg.payload).toFixed(2));\nmsg.payload=data;\n\n\nreturn msg;\n","outputs":1,"noerr":0,"x":1010,"y":640,"wires":[["e89b5ede.4abf1","a5d4462f.4508a8"]]},{"id":"13b6da48.05abe6","type":"function","z":"e571e1d6.1967f","name":"P2","func":"var data = parseFloat( (msg.payload).toFixed(2));\nmsg.payload = data;\n\n\n\nreturn msg;\n","outputs":1,"noerr":0,"x":1010,"y":700,"wires":[["b67345c0.2f35f8","66f79789.e89b48"]]},{"id":"e89b5ede.4abf1","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":7,"width":3,"height":4,"gtype":"compass","title":"Düşük Basınç","label":"Bar","format":"{{value}}","min":0,"max":"15","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1180,"y":640,"wires":[]},{"id":"1c1e43cf.4b57ac","type":"function","z":"e571e1d6.1967f","name":"T2","func":"var data = msg.payload[1];\n\ndata=(data-2700)/10;\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":340,"wires":[["c73a9a1a.7dd928","eeb74d04.4acf5"]]},{"id":"3edead95.78b6d2","type":"function","z":"e571e1d6.1967f","name":"T3","func":"var data = msg.payload[2];\n\ndata=data/10;\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":400,"wires":[["6165427f.48196c"]]},{"id":"df7d97fb.9b53f8","type":"function","z":"e571e1d6.1967f","name":"T4","func":"var data = msg.payload[3];\n\ndata=data/10;\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":460,"wires":[["60c53ebd.a8c4b"]]},{"id":"ebb93814.492bf8","type":"function","z":"e571e1d6.1967f","name":"T5","func":"var data = msg.payload[4];\n\ndata=data/10;\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":520,"wires":[["73be4da9.0fb784"]]},{"id":"b8de6518.7cc2e8","type":"function","z":"e571e1d6.1967f","name":"T6","func":"var data = msg.payload[5];\n\ndata=data/10;\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":580,"wires":[["3d26022.4e62bfe"]]},{"id":"6296be64.80ff2","type":"modbus-read","z":"e571e1d6.1967f","name":"StartTimer5dk","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"Coil","adr":"0","quantity":"4","rate":"1","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"baa950a9.8ec34","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":1610,"y":600,"wires":[["d425ea1d.0692c8","bc902014.89cde","51a99672.e72678","a7b4ce95.72682","94163f3c.17faf","6af32b30.1ed4f4","8368aca1.d0e54"],[]]},{"id":"d425ea1d.0692c8","type":"function","z":"e571e1d6.1967f","name":"","func":"var data= msg.payload[0];\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":400,"wires":[["d6eeedbe.9e799"]]},{"id":"bc902014.89cde","type":"function","z":"e571e1d6.1967f","name":"Start5dk","func":"var data= msg.payload[0];\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":2120,"y":320,"wires":[["fcc8e5af.be79e8"]]},{"id":"51a99672.e72678","type":"function","z":"e571e1d6.1967f","name":"Start5dk1","func":"var data= msg.payload[1];\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":2140,"y":480,"wires":[["457e4f32.dd5a7"]]},{"id":"a7b4ce95.72682","type":"function","z":"e571e1d6.1967f","name":"","func":"var data= msg.payload[1];\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":2130,"y":560,"wires":[["7ed156f7.a73158"]]},{"id":"cee8ac72.1c36b","type":"modbus-read","z":"e571e1d6.1967f","name":"HoldingRegisters","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"209","quantity":"13","rate":"2","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"baa950a9.8ec34","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":240,"y":620,"wires":[["5bdd9c65.a7b694","1c1e43cf.4b57ac","3edead95.78b6d2","df7d97fb.9b53f8","ebb93814.492bf8","b8de6518.7cc2e8","dd8b6a91.9e94a8","d94f78be.5a4b28","7ff37cf6.eee594","31dbdb2f.9d3c64","db7aeb2a.c95ce8","b52538d4.a31f18","61dee422.7e957c","bfd7f602.b09ef8","836b5ca.62f88a","b9eeca65.a73e78","ee3524bf.ebd278"],[]]},{"id":"5bdd9c65.a7b694","type":"function","z":"e571e1d6.1967f","name":"T1","func":"var data = msg.payload[0];\n\ndata=(data-2700)/10;\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":220,"wires":[["76c9d60d.d4bd88","19af0b1e.215205"]]},{"id":"dd8b6a91.9e94a8","type":"function","z":"e571e1d6.1967f","name":"P2","func":"var data = msg.payload[8];\n\n\nmsg.payload=data;\n\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":800,"wires":[["c5705bde.e71d68"]]},{"id":"d94f78be.5a4b28","type":"function","z":"e571e1d6.1967f","name":"P2S","func":"var data = msg.payload[9];\n\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":900,"wires":[["fdfbbcc6.5076e"]]},{"id":"7ff37cf6.eee594","type":"function","z":"e571e1d6.1967f","name":"SRC1","func":"var data = msg.payload[10];\n\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":1020,"wires":[["f42fe1f0.065b8"]]},{"id":"31dbdb2f.9d3c64","type":"function","z":"e571e1d6.1967f","name":"","func":"var data = msg.payload[6];\n\n\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":640,"wires":[["3e19e9d.b10f416"]]},{"id":"db7aeb2a.c95ce8","type":"function","z":"e571e1d6.1967f","name":"","func":"\nvar data = msg.payload[7];\n\nmsg.payload=data;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":700,"wires":[["a40e1980.2f86a8"]]},{"id":"eeb74d04.4acf5","type":"function","z":"e571e1d6.1967f","name":"Global T2","func":"var data= msg.payload;\n\n\nglobal.set(\"QT2\",data);\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":280,"wires":[[]]},{"id":"b52538d4.a31f18","type":"function","z":"e571e1d6.1967f","name":"","func":"\n\nmsg = {\n    \"payload\" : {\n        \"T1\"\t:\t(msg.payload[2] - 2700) / 10,\n        \"T2\"\t:   (msg.payload[3] - 2700) / 10,\n        \"T3\"\t:\tmsg.payload[4]  / 10,\n        \"T4\"\t:   msg.payload[5]  / 10,\n        \"T5\"\t:   msg.payload[6]  / 10,\n        \"T6\"\t:   msg.payload[7]  / 10, \n        \n        \n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":340,"wires":[["78449d8.d19f564"]]},{"id":"78449d8.d19f564","type":"function","z":"e571e1d6.1967f","name":"","func":"\n\nvar data = global.get('azure_data');\n\ndata[\"T1\"]    =  msg.payload[\"T1\"];\ndata[\"T2\"]    =  msg.payload[\"T2\"];\ndata[\"T3\"]    =  msg.payload[\"T3\"];\ndata[\"T4\"]    =  msg.payload[\"T4\"];\ndata[\"T5\"]    =  msg.payload[\"T5\"];\ndata[\"T6\"]    =  msg.payload[\"T6\"];\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":260,"wires":[[]]},{"id":"a5d4462f.4508a8","type":"function","z":"e571e1d6.1967f","name":"","func":"let foo = msg.payload;\n\nvar data = global.get('azure_data');\n\ndata[\"P1\"]    =  foo;\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":560,"wires":[[]]},{"id":"66f79789.e89b48","type":"function","z":"e571e1d6.1967f","name":"","func":"let foo = msg.payload;\n\nvar data = global.get('azure_data');\n\ndata[\"P2\"]    =  foo;\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":680,"wires":[[]]},{"id":"d2dcee24.2bdf2","type":"inject","z":"e571e1d6.1967f","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":1290,"y":340,"wires":[["5fa90bd7.a4a7a4"]]},{"id":"5fa90bd7.a4a7a4","type":"function","z":"e571e1d6.1967f","name":"Create Global Variable To Hold Azure Data","func":"var data = {\n    \"V1\"        :undefined,\n    \"C1\"        :undefined,\n    \"WT\"        :undefined,\n    \"T1\"        :undefined,\n    \"T2\"        :undefined,\n    \"T3\"        :undefined,\n    \"T4\"        :undefined,\n    \"T5\"        :undefined,\n    \"T6\"        :undefined,\n    \"P1\"        :undefined,\n    \"P2\"        :undefined,\n    \"Hz\"        :undefined,\n    \"WE\"        :undefined,\n    \"R1\"        :undefined,\n    \"R2\"        :undefined,\n    \"SC1\"       :undefined,\n    \"SC2\"       :undefined,\n    \"SC3\"       :undefined,\n    \"SC4\"       :undefined,\n    \"SC5\"       :undefined,\n    \"SC6\"       :undefined,\n    \"SC7\"       :undefined\n    \n    }\nglobal.set('azure_data', data)\nreturn msg;","outputs":1,"noerr":0,"x":1550,"y":340,"wires":[[]]},{"id":"8c93e204.3feed","type":"debug","z":"e571e1d6.1967f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1450,"y":380,"wires":[]},{"id":"109c8f88.3b834","type":"inject","z":"e571e1d6.1967f","name":"","topic":"","payload":"azure_data","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1270,"y":380,"wires":[["8c93e204.3feed"]]},{"id":"65d67edf.c0fc6","type":"function","z":"e571e1d6.1967f","name":"","func":"var data = msg.payload;\n\nif (data === true) {\n    msg.payload = false;\n}\n\nif (data === false) {\n    msg.payload = true\n}\nreturn msg;","outputs":1,"noerr":0,"x":2310,"y":680,"wires":[["cb47d768.c4ce68"]]},{"id":"cb47d768.c4ce68","type":"function","z":"e571e1d6.1967f","name":"","func":"let foo = msg.payload;\n\nvar data = global.get('azure_data');\n\ndata[\"R1\"]    =  foo;\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":2470,"y":680,"wires":[[]]},{"id":"27631514.be749a","type":"function","z":"e571e1d6.1967f","name":"","func":"var data = msg.payload;\n\nif (data === true) {\n    msg.payload = false;\n}\n\nif (data === false) {\n    msg.payload = true\n}\nreturn msg;","outputs":1,"noerr":0,"x":2310,"y":800,"wires":[["eef92e05.cc3b9"]]},{"id":"eef92e05.cc3b9","type":"function","z":"e571e1d6.1967f","name":"","func":"let foo = msg.payload;\n\nvar data = global.get('azure_data');\n\ndata[\"R2\"]    =  foo;\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":2450,"y":840,"wires":[[]]},{"id":"1dd5b3a9.8202dc","type":"inject","z":"e571e1d6.1967f","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":1310.0234375,"y":1044.0390625,"wires":[["45496b6d.85d534"]]},{"id":"45496b6d.85d534","type":"function","z":"e571e1d6.1967f","name":"set prevPower","func":"\nglobal.set(\"prevPower\",0)\n\nreturn msg;","outputs":1,"noerr":0,"x":1500.0234375,"y":1044.0390625,"wires":[[]]},{"id":"df317633.4253b8","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":20,"width":3,"height":3,"gtype":"donut","title":"Türbin","label":"Hz","format":"{{value}}","min":0,"max":"50","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":850,"y":1100,"wires":[]},{"id":"61dee422.7e957c","type":"function","z":"e571e1d6.1967f","name":"SRC2","func":"var data = msg.payload[11];\n\n\nmsg.payload=data;\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":1100,"wires":[["df317633.4253b8","36723a4.d5dd8c6"]]},{"id":"bfd7f602.b09ef8","type":"function","z":"e571e1d6.1967f","name":"Proses","func":"var data = msg.payload[12];\n\nvar R2 = global.get(\"R2ONOFF\")\n\n\n\n\nif( data == 3 ){\n    \n    msg.payload = \"START BEKLENİYOR\"\n    \n    \n}else if(data == 5 ){\n    \n    \n    msg.payload = \"BAŞLANGIÇ KOŞULLARI\"\n    \n    \n}else if(data == 10 || data == 15 ){\n    \n    \n    msg.payload = \"R1-R2 AÇMA\"\n    \n}else if(data == 20){\n    \n    \n    msg.payload = \"R2 KAPATMA\"\n    \n}else if(data == 25 || data == 30 ){\n    \n    \n    msg.payload = \"ÜRETİM\"\n}  \n// }else if(data == 25 || data == 30 && R2 === true){\n    \n    \n//     msg.payload = \"SÜRÜCÜ 2 AÇMA\"\n    \n// }\n\n\nelse if(data == 100 || data == 101 || data == 105){\n    \n    \n    msg.payload = \"ALARM\"\n    \n}\n\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":1180,"wires":[["858cc0b7.85eeb"]]},{"id":"858cc0b7.85eeb","type":"ui_text","z":"e571e1d6.1967f","group":"8d1e776.576f488","order":21,"width":6,"height":1,"name":"","label":"Makine Durum","format":"{{msg.payload}}","layout":"row-spread","x":900,"y":1180,"wires":[]},{"id":"bc291b0d.283848","type":"debug","z":"e571e1d6.1967f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2300,"y":640,"wires":[]},{"id":"6febf8ad.2c93d8","type":"debug","z":"e571e1d6.1967f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2340,"y":1020,"wires":[]},{"id":"8368aca1.d0e54","type":"debug","z":"e571e1d6.1967f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1820,"y":800,"wires":[]},{"id":"836b5ca.62f88a","type":"debug","z":"e571e1d6.1967f","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":440,"y":440,"wires":[]},{"id":"b9eeca65.a73e78","type":"function","z":"e571e1d6.1967f","name":"Proses","func":"var data = msg.payload[12];\n\nvar R2 = global.get(\"R2ONOFF\");\n\n\n\n\nif( data == 3 ){\n    \n    //  \"START BEKLENİYOR\";\n    \n    msg.payload =1;\n    \n}else if(data == 5 ){\n    // \"BAŞLANGIÇ KOŞULLARI\"\n    \n    msg.payload =2;\n    \n    \n}else if(data == 10 || data == 15 ){\n    //  \"R1-R2 AÇMA\"\n    \n    msg.payload =3;\n    \n}else if(data == 20){\n    \n    // \"R2 KAPATMA\"\n    \n    msg.payload = 4;\n    \n    \n}else if(data == 25 || data == 30 && R2 === false){\n    \n    //  \"ÜRETİM\"\n    msg.payload =5;\n    \n}else if(data == 25 || data == 30 && R2 === true){\n    \n    // Sürücü2 Açma Kapama\n    msg.payload = 6;\n    \n    \n}\n    \nelse if(data == 100 || data == 101 || data == 105){\n    \n    // \"ALARM\"\n    msg.payload = 7;\n    \n}\n\n\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":1280,"wires":[["c54f2042.3c6e5"]]},{"id":"ee3524bf.ebd278","type":"modbus-getter","z":"e571e1d6.1967f","name":"Toplam Güç","showStatusActivities":false,"showErrors":false,"logIOActivities":false,"unitid":"","dataType":"HoldingRegister","adr":"250","quantity":"2","server":"baa950a9.8ec34","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":130,"y":1040,"wires":[[],["b83277e0.1b3328"]]},{"id":"b83277e0.1b3328","type":"function","z":"e571e1d6.1967f","name":"","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.payload.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;\n","outputs":1,"noerr":0,"x":270,"y":1040,"wires":[["3b4254db.4f16cc","b3c0f0ea.b38e1"]]},{"id":"3b4254db.4f16cc","type":"ui_gauge","z":"e571e1d6.1967f","name":"","group":"8d1e776.576f488","order":18,"width":3,"height":3,"gtype":"wave","title":"Üretilen Enerji","label":"WH","format":"{{value}}","min":0,"max":"100000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":440,"y":1040,"wires":[]},{"id":"b3c0f0ea.b38e1","type":"function","z":"e571e1d6.1967f","name":"","func":"let foo = msg.payload;\n\nvar data = global.get('azure_data');\n\ndata[\"WE\"]    =  foo;\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":1120,"wires":[[]]},{"id":"36723a4.d5dd8c6","type":"function","z":"e571e1d6.1967f","name":"","func":"let foo = msg.payload;\n\nvar data = global.get('azure_data');\n\ndata[\"Hz\"]    =  foo;\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":1140,"wires":[[]]},{"id":"c54f2042.3c6e5","type":"function","z":"e571e1d6.1967f","name":"Status Code","func":"var foo = msg.payload;\nvar data = global.get('azure_data');\n\nif (foo == 1) {\n    data[\"SC1\"] =   true\n    data[\"SC2\"] =   false\n    data[\"SC3\"] =   false\n    data[\"SC4\"] =   false\n    data[\"SC5\"] =   false\n    data[\"SC6\"] =   false\n    data[\"SC7\"] =   false\n    global.set('azure_data',data)\n}\nif (foo == 2) {\n    data[\"SC1\"] =   false\n    data[\"SC2\"] =   true\n    data[\"SC3\"] =   false\n    data[\"SC4\"] =   false\n    data[\"SC5\"] =   false\n    data[\"SC6\"] =   false\n    data[\"SC7\"] =   false\n    global.set('azure_data',data)\n}\nif (foo == 3) {\n    data[\"SC1\"] =   false\n    data[\"SC2\"] =   false\n    data[\"SC3\"] =   true\n    data[\"SC4\"] =   false\n    data[\"SC5\"] =   false\n    data[\"SC6\"] =   false\n    data[\"SC7\"] =   false\n    global.set('azure_data',data)\n}\nif (foo == 4) {\n    data[\"SC1\"] =   false\n    data[\"SC2\"] =   false\n    data[\"SC3\"] =   false\n    data[\"SC4\"] =   true\n    data[\"SC5\"] =   false\n    data[\"SC6\"] =   false\n    data[\"SC7\"] =   false\n    global.set('azure_data',data)\n}\nif (foo == 5) {\n    data[\"SC1\"] =   false\n    data[\"SC2\"] =   false\n    data[\"SC3\"] =   false\n    data[\"SC4\"] =   false\n    data[\"SC5\"] =   true\n    data[\"SC6\"] =   false\n    data[\"SC7\"] =   false\n    global.set('azure_data',data)\n}\nif (foo == 6) {\n    data[\"SC1\"] =   false\n    data[\"SC2\"] =   false\n    data[\"SC3\"] =   false\n    data[\"SC4\"] =   false\n    data[\"SC5\"] =   false\n    data[\"SC6\"] =   true\n    data[\"SC7\"] =   false\n    global.set('azure_data',data)\n}\nif (foo == 7) {\n    data[\"SC1\"] =   false\n    data[\"SC2\"] =   false\n    data[\"SC3\"] =   false\n    data[\"SC4\"] =   false\n    data[\"SC5\"] =   false\n    data[\"SC6\"] =   false\n    data[\"SC7\"] =   true\n    global.set('azure_data',data)\n}\n\n\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":900,"y":1280,"wires":[[]]},{"id":"d2ae6b33.dc3fe8","type":"comment","z":"e571e1d6.1967f","name":"RePG-11","info":"","x":1260,"y":120,"wires":[]},{"id":"8d1e776.576f488","type":"ui_group","z":"","name":"Sistem Durum","tab":"7acb298c.436128","order":3,"disp":false,"width":18,"collapse":false},{"id":"baa950a9.8ec34","type":"modbus-client","z":"","name":"Allen Bradley","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"192.168.0.200","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectTimeout":"2000"},{"id":"7acb298c.436128","type":"ui_tab","z":"","name":"RePG_PLC_V4_1","icon":"dashboard","order":1,"disabled":false,"hidden":false}]