[{"id":"7431a39a.23110c","type":"modbus-getter","z":"57ff027c.3d335c","name":"","showStatusActivities":false,"showErrors":false,"logIOActivities":false,"unitid":"2","dataType":"HoldingRegister","adr":"0","quantity":"6","server":"82dcb9aa.5094c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":460,"y":240,"wires":[["9524d9bc.693738","315433e.814f4cc"],[]]},{"id":"180cf3d3.bdd43c","type":"inject","z":"57ff027c.3d335c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":220,"y":240,"wires":[["69f2efdb.a1e2a","7431a39a.23110c"]]},{"id":"69f2efdb.a1e2a","type":"delay","z":"57ff027c.3d335c","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":220,"y":420,"wires":[["b1bd661d.9d5028"]]},{"id":"9524d9bc.693738","type":"debug","z":"57ff027c.3d335c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":910,"y":240,"wires":[]},{"id":"b1bd661d.9d5028","type":"modbus-getter","z":"57ff027c.3d335c","name":"","showStatusActivities":false,"showErrors":false,"logIOActivities":false,"unitid":"3","dataType":"HoldingRegister","adr":"0","quantity":"6","server":"82dcb9aa.5094c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":380,"y":420,"wires":[["1160dbfd.38b154","b8f4efe7.332e9"],[]]},{"id":"1160dbfd.38b154","type":"debug","z":"57ff027c.3d335c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":590,"y":420,"wires":[]},{"id":"e5dfc80e.c3f048","type":"debug","z":"57ff027c.3d335c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":350,"y":80,"wires":[]},{"id":"2f7850.6983e7b","type":"inject","z":"57ff027c.3d335c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":130,"y":40,"wires":[["de8c260c.95b898"]]},{"id":"de8c260c.95b898","type":"function","z":"57ff027c.3d335c","name":"Create Global Variable To Hold Azure Data","func":"var data = {\n    \"A1_v1\"     :undefined,\n    \"A1_v2\"     :undefined,\n    \"A1_v3\"     :undefined,\n    \"A1_c1\"     :undefined,\n    \"A1_c2\"     :undefined,\n    \"A1_c3\"     :undefined,\n    \"A1_p1\"     :undefined,\n    \"A1_p2\"     :undefined,\n    \"A1_p3\"     :undefined,\n    \"A1_t_p\"    :undefined,\n    \"T1\"        :undefined,\n    \"T2\"        :undefined,\n    \"T3\"        :undefined,\n    \"T4\"        :undefined,\n    \"T5\"        :undefined,\n    \"T6\"        :undefined,\n    \"P1\"        :undefined,\n    \"P2\"        :undefined,\n    \"PT\"        :undefined\n    }\nglobal.set('azure_data', data)\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":40,"wires":[[]]},{"id":"14dce28b.c7895d","type":"inject","z":"57ff027c.3d335c","name":"","topic":"","payload":"azure_data","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":80,"wires":[["e5dfc80e.c3f048","d0ba095d.ed0958"]]},{"id":"315433e.814f4cc","type":"function","z":"57ff027c.3d335c","name":"Temperature Sensor","func":"\nmsg = {\n    \"payload\" : {\n        \"Temp1\" :   msg.payload[0]  /   10,\n        \"Temp2\"\t:   msg.payload[1]  /   10,\n        \"Temp3\"\t:   msg.payload[2]  /   10,\n        \"Temp4\"\t:   msg.payload[3]  /   10,\n        \"Temp5\"\t:   msg.payload[4]  /   10,\n        \"Temp6\"\t:   msg.payload[5]  /   10\n        \n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":620,"y":320,"wires":[["45f890fd.82cf4","4770d877.248ac8"]]},{"id":"4770d877.248ac8","type":"function","z":"57ff027c.3d335c","name":"Set Data To Azure_Global ","func":"var data = global.get('azure_data');\n\nif (msg.payload[\"Temp1\"] != 850) {\n    data[\"T1\"]    =  msg.payload[\"Temp1\"];\n    \n}\nif (msg.payload[\"Temp2\"] != 850) {\n    data[\"T2\"]    =  msg.payload[\"Temp2\"];\n    \n}\nif (msg.payload[\"Temp3\"] != 850) {\n    data[\"T3\"]    =  msg.payload[\"Temp3\"];\n    \n}\nif (msg.payload[\"Temp4\"] != 850) {\n    data[\"T4\"]    =  msg.payload[\"Temp4\"];\n    \n}\nif (msg.payload[\"Temp5\"] != 850) {\n    data[\"T5\"]    =  msg.payload[\"Temp5\"];\n    \n}\nif (msg.payload[\"Temp6\"] != 850) {\n    data[\"T6\"]    =  msg.payload[\"Temp6\"];\n    \n}\n\nglobal.set('azure_data', data);\n\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":320,"wires":[[]]},{"id":"b8f4efe7.332e9","type":"function","z":"57ff027c.3d335c","name":"Pressure Sensor","func":"\nmsg = {\n    \"payload\" : {\n        \"P1\"    :   msg.payload[0]  /   100,\n        \"P2\"\t:   msg.payload[1]  /   100\n\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":540,"wires":[["1a34ba9e.c87195","c39016c2.dc9598"]]},{"id":"1a34ba9e.c87195","type":"range","z":"57ff027c.3d335c","minin":"0","maxin":"10","minout":"0","maxout":"50","action":"scale","round":false,"property":"payload.P1","name":"","x":750,"y":540,"wires":[["4c5009fa.1b8f08"]]},{"id":"c39016c2.dc9598","type":"range","z":"57ff027c.3d335c","minin":"0","maxin":"10","minout":"0","maxout":"50","action":"scale","round":false,"property":"payload.P2","name":"","x":750,"y":580,"wires":[["e421f167.67616"]]},{"id":"4c5009fa.1b8f08","type":"function","z":"57ff027c.3d335c","name":"","func":"var data = parseFloat( (msg.payload.P1).toFixed(1));\nmsg.payload = Number(data)\n\nvar data1 = global.get('azure_data');\ndata1[\"P1\"]    =  data;\nglobal.set('azure_data', data1);\n\nreturn msg;\n","outputs":1,"noerr":0,"x":890,"y":540,"wires":[[]]},{"id":"e421f167.67616","type":"function","z":"57ff027c.3d335c","name":"","func":"var data = parseFloat( (msg.payload.P2).toFixed(1));\nmsg.payload = Number(data)\n\nvar data1 = global.get('azure_data');\ndata1[\"P2\"]    =  data;\nglobal.set('azure_data', data1);\n\nreturn msg;\n","outputs":1,"noerr":0,"x":890,"y":580,"wires":[[]]},{"id":"d0ba095d.ed0958","type":"http request","z":"57ff027c.3d335c","name":"","method":"POST","ret":"txt","paytoqs":false,"url":"10.10.10.79:1880/data","tls":"","proxy":"","authType":"","x":350,"y":120,"wires":[[]]},{"id":"45f890fd.82cf4","type":"debug","z":"57ff027c.3d335c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":850,"y":280,"wires":[]},{"id":"82dcb9aa.5094c8","type":"modbus-client","z":"","name":"","clienttype":"simpleser","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"COM4","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectTimeout":"2000"}]