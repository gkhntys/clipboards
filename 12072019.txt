[{"id":"a90e30ae.2d641","type":"function","z":"c8db3a2c.35ba68","name":"","func":"global.set(\"R4\",true)\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":540,"wires":[[]]},{"id":"ec43d7f2.267298","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":300,"wires":[]},{"id":"ec2754bd.2b1d68","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"75","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":460,"wires":[["69af0e93.94f1e"]]},{"id":"8fdb011f.ef29b","type":"function","z":"c8db3a2c.35ba68","name":"temp>70","func":"var temp =global.get(\"temp\")\nvar pres    =   global.get(\"pressure\")\nif (temp > 70 && temp < 100 && pres < 25) {\n    msg.payload = true\n    global.set(\"refresh\",false)\n    global.set(\"start\",false)\n    global.set(\"R4\" , false)\n    return msg;\n}\n\nelse {\n    //global.set(\"refresh\",true)\n}\n","outputs":1,"noerr":0,"x":480,"y":140,"wires":[["16a89089.00547f"]]},{"id":"a7e03b88.90dfa8","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"60","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":500,"wires":[["69af0e93.94f1e"]]},{"id":"73631cb7.3d0104","type":"rpi-gpio out","z":"c8db3a2c.35ba68","name":"R1","pin":"7","set":"","level":"0","freq":"","out":"out","x":1210,"y":220,"wires":[]},{"id":"21c0dbeb.656c34","type":"rpi-gpio out","z":"c8db3a2c.35ba68","name":"R4","pin":"15","set":"","level":"0","freq":"","out":"out","x":1210,"y":80,"wires":[]},{"id":"16a89089.00547f","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":140,"wires":[["3678de02.eaa4c2"]]},{"id":"3678de02.eaa4c2","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":140,"wires":[["b1a77253.c1758","5b716e20.99104"]]},{"id":"69af0e93.94f1e","type":"function","z":"c8db3a2c.35ba68","name":"temp set","func":"global.set(\"temp\",msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":460,"wires":[[]]},{"id":"7901584e.344cf8","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"temp","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":840,"wires":[["eab191a6.50ae4","cebd898a.58acc8"]]},{"id":"b03be741.7b37b8","type":"function","z":"c8db3a2c.35ba68","name":"","func":"var data = msg.payload;\n\nif ( data === true) {\n    msg.payload = true\n    return msg;\n}\n\nelse {\n    msg.payload = false\n    return msg;\n}","outputs":1,"noerr":0,"x":930,"y":320,"wires":[["23ae578d.bcca58"]]},{"id":"a28116d7.d519b8","type":"comment","z":"c8db3a2c.35ba68","name":"Start","info":"","x":330,"y":100,"wires":[]},{"id":"20d4d665.bb882a","type":"function","z":"c8db3a2c.35ba68","name":"65<T1<80","func":"var data = global.get(\"temp\")\nif (data>65 && data<80) {\n    msg.payload = 15\n    global.set(\"driver\",msg.payload)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":710,"y":500,"wires":[["34b2174c.3c7fa8"]]},{"id":"f1971ce7.93a3c","type":"function","z":"c8db3a2c.35ba68","name":"80<T1<90","func":"var data = global.get(\"temp\")\nif (data>80 && data<90) {\n    msg.payload = 17\n    global.set(\"driver\",msg.payload)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":710,"y":540,"wires":[["34b2174c.3c7fa8"]]},{"id":"353b35c9.bbf46a","type":"function","z":"c8db3a2c.35ba68","name":"90<T1<100","func":"var data = global.get(\"temp\")\nif (data>90 && data<100) {\n    msg.payload = 20\n    global.set(\"driver\",msg.payload)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":710,"y":580,"wires":[["34b2174c.3c7fa8"]]},{"id":"4b903242.cfd90c","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"85","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":420,"wires":[["69af0e93.94f1e"]]},{"id":"a4f511b0.1556b","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"driver","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":900,"wires":[["1070447b.71f4dc"]]},{"id":"ab6d3a88.6570b8","type":"function","z":"c8db3a2c.35ba68","name":"100<T1    -   T1<65","func":"var data = global.get(\"temp\")\nif (data>100 || data<65) {\n    global.set(\"driver\",0)\n    msg.payload = true\n    return msg;\n}\n","outputs":1,"noerr":0,"x":720,"y":620,"wires":[["652ff0d6.0a883"]]},{"id":"652ff0d6.0a883","type":"function","z":"c8db3a2c.35ba68","name":"","func":"if (msg.payload ===true){\n    msg.payload = false\n    global.set(\"R4\",true)\n    global.set(\"R1\",true)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":690,"y":660,"wires":[["a8f778cd.c2b3d8"]]},{"id":"a8f778cd.c2b3d8","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":690,"y":780,"wires":[["39fdbfe9.10a4a"]]},{"id":"39fdbfe9.10a4a","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":820,"y":780,"wires":[["f6fe600f.b15a"]]},{"id":"34b2174c.3c7fa8","type":"function","z":"c8db3a2c.35ba68","name":"","func":"var data = msg.payload ;\nif (data > 14) {\n    global.set(\"drv\",true)\n    msg.payload = true\n    return msg;\n}\nelse {\n    global.set(\"drv\",false)\n    msg.payload = false\n    return msg;\n}\n","outputs":1,"noerr":0,"x":870,"y":540,"wires":[["9ab2326a.199d7"]]},{"id":"acaca744.1965e8","type":"function","z":"c8db3a2c.35ba68","name":"65<T1<100","func":"var temp = global.get(\"temp\")\nif (65<temp && temp<100) {\n    msg.payload = false\n    global.set(\"flow\",true)\n    global.set(\"check\", true)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":1030,"y":480,"wires":[["9f2653a3.15f5d"]]},{"id":"b1a77253.c1758","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":800,"y":320,"wires":[["b03be741.7b37b8"]]},{"id":"584e1c8b.334044","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"95","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":380,"wires":[["69af0e93.94f1e"]]},{"id":"f6265e3f.a861a","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"105","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":340,"wires":[["69af0e93.94f1e"]]},{"id":"9ab2326a.199d7","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":990,"y":540,"wires":[["acaca744.1965e8","b8fcb812.d71ed8"]]},{"id":"eadd310c.a7f93","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"start","payloadType":"global","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":140,"wires":[["275a5d19.7d07d2"]]},{"id":"a4a1cba9.f93fb8","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1300,"y":480,"wires":[[]]},{"id":"9f2653a3.15f5d","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":1170,"y":480,"wires":[["a4a1cba9.f93fb8"]]},{"id":"7af84a83.84a684","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"drv","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":960,"wires":[[]]},{"id":"23ae578d.bcca58","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":930,"y":360,"wires":[["20d4d665.bb882a","f1971ce7.93a3c","353b35c9.bbf46a","ab6d3a88.6570b8"]]},{"id":"d2846317.d2211","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":780,"wires":[]},{"id":"f6fe600f.b15a","type":"function","z":"c8db3a2c.35ba68","name":"","func":"if (msg.payload === false) {\n    global.set(\"refresh\",true)\n    global.set(\"rly\",false)\n    \n}\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":800,"wires":[[]]},{"id":"f831a5b8.9f3798","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"refresh","payloadType":"global","repeat":"2","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":240,"wires":[["b2c9d578.596548"]]},{"id":"b2c9d578.596548","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":240,"wires":[["4e7f6809.bffbc8","8fdb011f.ef29b","ec43d7f2.267298"]]},{"id":"4e7f6809.bffbc8","type":"function","z":"c8db3a2c.35ba68","name":"","func":"//global.set(\"rly\",false)\n//global.set(\"flow\",false)","outputs":1,"noerr":0,"x":450,"y":240,"wires":[[]]},{"id":"d8b38a48.31df58","type":"ui_text","z":"c8db3a2c.35ba68","group":"374ecd64.9e1ff2","order":1,"width":"4","height":"4","name":"","label":"R4","format":"{{msg.payload}}","layout":"col-center","x":1330,"y":140,"wires":[]},{"id":"e11fa8ef.c4e448","type":"ui_text","z":"c8db3a2c.35ba68","group":"374ecd64.9e1ff2","order":2,"width":"4","height":"4","name":"","label":"R1","format":"{{msg.payload}}","layout":"col-center","x":1370,"y":180,"wires":[]},{"id":"eab191a6.50ae4","type":"ui_gauge","z":"c8db3a2c.35ba68","name":"","group":"374ecd64.9e1ff2","order":0,"width":"4","height":"4","gtype":"gage","title":"Sýcaklýk","label":"units","format":"{{value}}","min":0,"max":"120","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":340,"y":840,"wires":[]},{"id":"cebd898a.58acc8","type":"ui_slider","z":"c8db3a2c.35ba68","name":"","label":"slider","group":"374ecd64.9e1ff2","order":3,"width":0,"height":0,"passthru":true,"topic":"","min":0,"max":"120","step":1,"x":130,"y":540,"wires":[["69af0e93.94f1e"]]},{"id":"e65da784.bcfd88","type":"function","z":"c8db3a2c.35ba68","name":"","func":"if (msg.payload===true) {\n    msg.payload= \"Kapalý\"\n    return msg;\n}\nelse if (msg.payload === false) {\n    msg.payload = \"Açýk\"\n    return msg;\n}","outputs":1,"noerr":0,"x":1210,"y":140,"wires":[["d8b38a48.31df58"]]},{"id":"cb6cc7c7.4e8e38","type":"function","z":"c8db3a2c.35ba68","name":"","func":"if (msg.payload===true) {\n    msg.payload= \"Kapalý\"\n    return msg;\n}\nelse if (msg.payload === false) {\n    msg.payload = \"Açýk\"\n    return msg;\n}","outputs":1,"noerr":0,"x":1210,"y":180,"wires":[["e11fa8ef.c4e448"]]},{"id":"1070447b.71f4dc","type":"ui_gauge","z":"c8db3a2c.35ba68","name":"","group":"374ecd64.9e1ff2","order":4,"width":"4","height":"4","gtype":"gage","title":"Sürücü","label":"units","format":"{{value}}","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":340,"y":900,"wires":[]},{"id":"f0f9a457.d99b18","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"rly","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":510,"y":920,"wires":[["414d4944.4864d8"]]},{"id":"414d4944.4864d8","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":860,"wires":[["ab6d3a88.6570b8"]]},{"id":"b8fcb812.d71ed8","type":"function","z":"c8db3a2c.35ba68","name":"100<T1    -   T1<65","func":"var data = global.get(\"temp\")\nif (data>100 || data<65) {\n    global.set(\"driver\",0)\n    msg.payload = true\n    return msg;\n}\n","outputs":1,"noerr":0,"x":1180,"y":680,"wires":[["3a14e788.10bf58"]]},{"id":"3a14e788.10bf58","type":"link out","z":"c8db3a2c.35ba68","name":"","links":["911cde28.5864b"],"x":1315,"y":680,"wires":[]},{"id":"911cde28.5864b","type":"link in","z":"c8db3a2c.35ba68","name":"","links":["3a14e788.10bf58"],"x":555,"y":660,"wires":[["652ff0d6.0a883"]]},{"id":"275a5d19.7d07d2","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":180,"wires":[["3bbf671c.b7bea8","2e28af5b.b5371"]]},{"id":"3bbf671c.b7bea8","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":340,"y":140,"wires":[["8fdb011f.ef29b"]]},{"id":"bdad0942.d2cd68","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"30","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":640,"wires":[["ac45108d.04b5d"]]},{"id":"57b011a3.ecc9a","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"15","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":680,"wires":[["ac45108d.04b5d"]]},{"id":"ac45108d.04b5d","type":"function","z":"c8db3a2c.35ba68","name":" pressure set","func":"global.set(\"pressure\",msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":660,"wires":[[]]},{"id":"9256e0d3.b4e17","type":"function","z":"c8db3a2c.35ba68","name":"","func":"var data = global.get(\"pressure\")\nif (data == 30) {\n    msg.payload = true\n    return msg;\n}\n\n","outputs":1,"noerr":0,"x":430,"y":700,"wires":[["d2846317.d2211"]]},{"id":"75444e97.39ff7","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":740,"wires":[["9256e0d3.b4e17"]]},{"id":"38f0ddc0.8b0ff2","type":"function","z":"c8db3a2c.35ba68","name":"Modbus Giriþi","func":"var data = msg.payload[0] ;\nmsg.payload = data /10 ;\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":360,"wires":[["69af0e93.94f1e"]]},{"id":"c6bf084.b21eff8","type":"ui_button","z":"c8db3a2c.35ba68","name":"","group":"374ecd64.9e1ff2","order":6,"width":0,"height":0,"passthru":false,"label":"OFF","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":450,"y":620,"wires":[["652ff0d6.0a883","3749bad4.76a1c6"]]},{"id":"52f490cd.8c5ae","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1110,"y":320,"wires":[[]]},{"id":"3749bad4.76a1c6","type":"function","z":"c8db3a2c.35ba68","name":"","func":"msg.reset = true\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":540,"wires":[["3678de02.eaa4c2","b1a77253.c1758","39fdbfe9.10a4a"]]},{"id":"17fd0ee5.682f41","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1110,"y":360,"wires":[[]]},{"id":"1d17fc7c.299824","type":"debug","z":"c8db3a2c.35ba68","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1310,"y":400,"wires":[]},{"id":"99053d28.46905","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":170,"y":1060,"wires":[["f0696ae9.0769c8"]]},{"id":"f0696ae9.0769c8","type":"function","z":"c8db3a2c.35ba68","name":"Global relay","func":"global.set(\"R1\", true);\nglobal.set(\"R4\", true);\n","outputs":1,"noerr":0,"x":350,"y":1060,"wires":[[]]},{"id":"6db1bc0a.4e0cd4","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"R4","payloadType":"global","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":1050,"y":100,"wires":[["21c0dbeb.656c34","e65da784.bcfd88"]]},{"id":"f01f1cdb.9eea7","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"R1","payloadType":"global","repeat":"1","crontab":"","once":true,"onceDelay":0.1,"x":1050,"y":200,"wires":[["73631cb7.3d0104","cb6cc7c7.4e8e38"]]},{"id":"a4941872.d15878","type":"debug","z":"c8db3a2c.35ba68","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":940,"y":1080,"wires":[]},{"id":"5b716e20.99104","type":"function","z":"c8db3a2c.35ba68","name":"","func":"global.set(\"R1\",false)\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":140,"wires":[[]]},{"id":"2a5771b1.2654ae","type":"modbus-read","z":"c8db3a2c.35ba68","name":"PT-100","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"2","dataType":"HoldingRegister","adr":"0","quantity":"2","rate":"2","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"4ba5fe40.24c05","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":250,"y":300,"wires":[[],[]]},{"id":"2e28af5b.b5371","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":560,"y":180,"wires":[]},{"id":"bf25c776.f51188","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":570,"y":1020,"wires":[["21a3cd62.3c37f2"]]},{"id":"21a3cd62.3c37f2","type":"function","z":"c8db3a2c.35ba68","name":"","func":"global.set(\"temp\", 0);\nglobal.set(\"pressure\",0);\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":960,"wires":[[]]},{"id":"54ac5d94.ff8534","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":1300,"wires":[["f71acd04.33b3f","c613bacb.84e3b8","5de9a6a.aa0b858","8247cd61.8b2da"]]},{"id":"f71acd04.33b3f","type":"function","z":"c8db3a2c.35ba68","name":"65<T1<79","func":"var data = global.get(\"temp\")\nif (data>65 && data<79) {\n    msg.payload = 15\n    global.set(\"driver\",msg.payload)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":590,"y":1240,"wires":[["98fe8246.1041b"]]},{"id":"c613bacb.84e3b8","type":"function","z":"c8db3a2c.35ba68","name":"79<T1<91","func":"var data = global.get(\"temp\")\nif (data>79 && data<91) {\n    msg.payload = 17\n    global.set(\"driver\",msg.payload)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":590,"y":1280,"wires":[["98fe8246.1041b"]]},{"id":"5de9a6a.aa0b858","type":"function","z":"c8db3a2c.35ba68","name":"91<T1<100","func":"var data = global.get(\"temp\")\nif (data>91 && data<100) {\n    msg.payload = 20\n    global.set(\"driver\",msg.payload)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":590,"y":1320,"wires":[["98fe8246.1041b"]]},{"id":"36bacdeb.b85e82","type":"comment","z":"c8db3a2c.35ba68","name":"Üretim","info":"","x":190,"y":1180,"wires":[]},{"id":"b4952110.2e494","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"flow","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":1300,"wires":[["54ac5d94.ff8534"]]},{"id":"98fe8246.1041b","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":1260,"wires":[]},{"id":"8247cd61.8b2da","type":"function","z":"c8db3a2c.35ba68","name":"100<T1    -   T1<65","func":"var data = global.get(\"temp\")\nvar pres    =   global.get(\"pressure\")\nif (data>100 || data<65 || pres > 29 ) {\n    global.set(\"driver\",0)\n    //global.set(\"rly\",true)\n    global.set(\"flow\",false)\n    msg.payload = true\n    return msg;\n}\n","outputs":1,"noerr":0,"x":600,"y":1360,"wires":[["a296b770.bd5398"]]},{"id":"a296b770.bd5398","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":810,"y":1360,"wires":[]},{"id":"9cfbe778.b81e68","type":"function","z":"c8db3a2c.35ba68","name":"","func":"var data = msg.payload.value\nmsg.payload = data\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1900,"wires":[[]]},{"id":"f7bf4d93.ac45c","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":850,"y":1300,"wires":[["53e8e472.050d1c"]]},{"id":"53e8e472.050d1c","type":"function","z":"c8db3a2c.35ba68","name":"","func":"\nlet obj = {};\n\n    \n    obj[\"rly\"] = global.get( \"rly\" )\n    obj[\"flow\"] = global.get( \"flow\" )\n    obj[\"temp\"] = global.get( \"temp\" )\n    obj[\"driver\"] = global.get( \"driver\" )\n    obj[\"refresh\"] = global.get( \"refresh\" )\n    obj[\"start\"] = global.get( \"start\" )\n    obj[\"modbus1\"] = global.get( \"modbus1\" )\n    obj[\"modbus2\"] = global.get( \"modbus2\" )\n\nmsg.payload = obj;\n\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":1300,"wires":[["754469a2.b1e088","41e45ccf.4fa044"]]},{"id":"754469a2.b1e088","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1210,"y":1300,"wires":[]},{"id":"41e45ccf.4fa044","type":"ui_template","z":"c8db3a2c.35ba68","group":"374ecd64.9e1ff2","name":"","order":5,"width":0,"height":0,"format":"\n{{msg.payload}}\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1200,"y":1260,"wires":[[]]},{"id":"e1b73faa.4c69c","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"check","payloadType":"global","repeat":"4","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1440,"wires":[["c9a0e412.aba108"]]},{"id":"212d1b03.db23c4","type":"function","z":"c8db3a2c.35ba68","name":"","func":"var data = msg.payload\nif (data === true) {\n    msg.payload = global.get(\"driver\")\n    return msg;\n}\n","outputs":1,"noerr":0,"x":430,"y":1440,"wires":[["df080d31.b2952"]]},{"id":"c9a0e412.aba108","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":310,"y":1440,"wires":[["212d1b03.db23c4"]]},{"id":"db170667.5a02f8","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"driver","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":1680,"wires":[[]]},{"id":"891a035.4404b","type":"debug","z":"c8db3a2c.35ba68","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":590,"y":1400,"wires":[]},{"id":"490c1935.cca128","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"driver","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1880,"wires":[[]]},{"id":"43747006.905f4","type":"debug","z":"c8db3a2c.35ba68","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1110,"y":1360,"wires":[]},{"id":"3e0b1a69.a8e1c6","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1550,"y":1660,"wires":[]},{"id":"c0aa5f7b.e96ce","type":"function","z":"c8db3a2c.35ba68","name":"set check true","func":"global.set(\"check\", true)\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":1800,"wires":[[]]},{"id":"a6b290b0.80a2f","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":1190,"y":1880,"wires":[["6372b40b.711f0c"]]},{"id":"6372b40b.711f0c","type":"function","z":"c8db3a2c.35ba68","name":"","func":"global.set(\"value\", undefined)\nglobal.set(\"address\", 0)\nglobal.set(\"fc\", 6)\nreturn msg;","outputs":1,"noerr":0,"x":1330,"y":1880,"wires":[[]]},{"id":"f649a267.1d7ea","type":"function","z":"c8db3a2c.35ba68","name":"Set modbus1","func":"global.set(\"modbus1\", msg.payload)\n","outputs":1,"noerr":0,"x":710,"y":1520,"wires":[[]]},{"id":"a17773f.4e4069","type":"function","z":"c8db3a2c.35ba68","name":"Modbus True","func":"\nvar data = msg.payload.value\nglobal.set(\"modbus2\", data)\n\nvar modbus =  global.get(\"modbus1\") \n\n\nif (data == modbus ) {\n    msg.payload = true\n    //global.set(\"refresh\", false)\n    //global.set(\"start\", false)\n    ///global.set(\"check\", false)\n    return msg;\n}\n","outputs":1,"noerr":0,"x":990,"y":1440,"wires":[["4dd79763.c4a088"]]},{"id":"4dd79763.c4a088","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1150,"y":1400,"wires":[]},{"id":"df080d31.b2952","type":"range","z":"c8db3a2c.35ba68","minin":"0","maxin":"50","minout":"0","maxout":"1000","action":"scale","round":false,"property":"payload","name":"","x":560,"y":1440,"wires":[["f649a267.1d7ea","891a035.4404b","9cd137c8.266948"]]},{"id":"d5bda28e.ef256","type":"function","z":"c8db3a2c.35ba68","name":"Modbus False","func":"var driver =  msg.payload;\nvar modbus1 = global.get(\"modbus1\")\nvar modbus2 = global.get(\"modbus2\")\n\nif ( modbus1 == modbus2 )  {\n    msg.payload = false\n    global.set(\"check\", true)\n    return msg;\n}","outputs":1,"noerr":0,"x":580,"y":1680,"wires":[[]]},{"id":"da1015a1.716ec8","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1820,"wires":[[]]},{"id":"b2cb4f7b.1b341","type":"range","z":"c8db3a2c.35ba68","minin":"0","maxin":"50","minout":"0","maxout":"1000","action":"scale","round":false,"property":"payload","name":"","x":380,"y":1680,"wires":[["e008e111.c7163"]]},{"id":"e008e111.c7163","type":"function","z":"c8db3a2c.35ba68","name":"set modbus3","func":"global.set(\"modbus3\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1720,"wires":[[]]},{"id":"95e74a70.02fb28","type":"function","z":"c8db3a2c.35ba68","name":"","func":"global.set(\"value\",msg.payload.value)\nvar data = msg.payload.value\nvar modbus = global.get(\"modbus1\")\nif (data == modbus && data === 0) {\n    //global.set(\"rly\",true)\n    global.set(\"check\",false)\n    msg.payload = false\n    return msg;\n}\nelse if (data == modbus) {\n    global.set(\"mq\",true)\n    msg.payload = true\n    return msg;\n}\n","outputs":1,"noerr":0,"x":950,"y":1520,"wires":[["5b752d1e.3c17f4","545c3d53.1f4214","cb04d58c.fc3298","79d913a.a25d8ec"]]},{"id":"9cd137c8.266948","type":"modbus-write","z":"c8db3a2c.35ba68","name":"","showStatusActivities":false,"showErrors":false,"unitid":"4","dataType":"HoldingRegister","adr":"3","quantity":"1","server":"4ba5fe40.24c05","x":760,"y":1440,"wires":[["43747006.905f4","95e74a70.02fb28"],[]]},{"id":"496fb681.6a2f68","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":510,"y":1500,"wires":[["9cd137c8.266948"]]},{"id":"5b752d1e.3c17f4","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1350,"y":1420,"wires":[["d70c5f8a.568db"]]},{"id":"d70c5f8a.568db","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1440,"y":1520,"wires":[["6911fa2e.df4474"]]},{"id":"2a69d34c.f765cc","type":"function","z":"c8db3a2c.35ba68","name":"","func":"global.set(\"R4\",true)\nmsg.payload = global.get (\"R4\")\n//global.set(\"refresh\", true)\n//global.set(\"start\", true)\n\nreturn msg;","outputs":1,"noerr":0,"x":1470,"y":1600,"wires":[[]]},{"id":"545c3d53.1f4214","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1070,"y":1580,"wires":[]},{"id":"6911fa2e.df4474","type":"delay","z":"c8db3a2c.35ba68","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"31","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":1680,"wires":[["2a69d34c.f765cc","3e0b1a69.a8e1c6"]]},{"id":"6476b2b3.12602c","type":"function","z":"c8db3a2c.35ba68","name":"","func":"msg.reset = true\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":1520,"wires":[["d70c5f8a.568db","c4b25219.6e946","6911fa2e.df4474"]]},{"id":"cb04d58c.fc3298","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":1140,"y":1520,"wires":[["6476b2b3.12602c"]]},{"id":"6448b797.10c588","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":930,"y":1780,"wires":[["ff0196a0.9c4468"]]},{"id":"ff0196a0.9c4468","type":"function","z":"c8db3a2c.35ba68","name":"Global set \"0\"","func":"global.set(\"driver\", 0);\nglobal.set(\"modbus\",0);\nglobal.set(\"modbus1\",0);\nglobal.set(\"modbus2\",0);\nglobal.set(\"modbus3\",0);\nglobal.set(\"rly\",false);\nglobal.set(\"flow\",false);\nglobal.set(\"check\",false);\nglobal.set(\"refresh\",false);\nglobal.set(\"start\",true)\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":1720,"wires":[[]]},{"id":"79d913a.a25d8ec","type":"switch","z":"c8db3a2c.35ba68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":890,"y":1640,"wires":[["ff0196a0.9c4468","5dd737a0.0ec398"]]},{"id":"95fca2db.2bb57","type":"inject","z":"c8db3a2c.35ba68","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":830,"y":1840,"wires":[["5dd737a0.0ec398"]]},{"id":"5dd737a0.0ec398","type":"function","z":"c8db3a2c.35ba68","name":"Global relay","func":"global.set(\"R1\", true);\nglobal.set(\"R4\", true);\n","outputs":1,"noerr":0,"x":1010,"y":1840,"wires":[[]]},{"id":"c4b25219.6e946","type":"debug","z":"c8db3a2c.35ba68","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1490,"y":1300,"wires":[]},{"id":"374ecd64.9e1ff2","type":"ui_group","z":"","name":"Group 1","tab":"5eef7844.a9fb78","order":1,"disp":true,"width":"16","collapse":false},{"id":"4ba5fe40.24c05","type":"modbus-client","z":"","name":"","clienttype":"simpleser","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB0","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"3000","reconnectTimeout":"2000"},{"id":"5eef7844.a9fb78","type":"ui_tab","name":"Tab 1","icon":"dashboard","order":1}]