[{"id":"4adea582.c8508c","type":"debug","z":"514f73fb.138a2c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1050,"y":220,"wires":[]},{"id":"36b5e2d2.4571be","type":"function","z":"514f73fb.138a2c","name":"","func":"var data = global.get(\"driver\")\ndata = data + 1\nmsg.payload = data\nglobal.set(\"driver\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":600,"wires":[["decd994e.cd8808"]]},{"id":"38762264.e338ce","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"driver","payloadType":"global","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":570,"y":720,"wires":[["e3a86458.3e6ea8"]]},{"id":"e3a86458.3e6ea8","type":"debug","z":"514f73fb.138a2c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":740,"y":720,"wires":[]},{"id":"f41d399a.df8038","type":"inject","z":"514f73fb.138a2c","name":"Arttır","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":600,"wires":[["1a660e6e.0aaf82","ee363921.ef6298"]]},{"id":"decd994e.cd8808","type":"debug","z":"514f73fb.138a2c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1010,"y":620,"wires":[]},{"id":"6d9a7b4f.914e04","type":"function","z":"514f73fb.138a2c","name":"","func":"var data = global.get(\"driver\")\ndata = data - 1\nmsg.payload = data\nglobal.set(\"driver\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":640,"wires":[["decd994e.cd8808"]]},{"id":"1a660e6e.0aaf82","type":"switch","z":"514f73fb.138a2c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":730,"y":600,"wires":[["36b5e2d2.4571be"]]},{"id":"ee363921.ef6298","type":"switch","z":"514f73fb.138a2c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":730,"y":640,"wires":[["6d9a7b4f.914e04"]]},{"id":"30465d18.745c12","type":"inject","z":"514f73fb.138a2c","name":"Azalt","topic":"","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":640,"wires":[["1a660e6e.0aaf82","ee363921.ef6298"]]},{"id":"4af4e6c2.396a18","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":570,"y":780,"wires":[["2c3b9359.ccf05c"]]},{"id":"2c3b9359.ccf05c","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"driver\",0)\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":780,"wires":[[]]},{"id":"39ced2c7.ddae1e","type":"function","z":"514f73fb.138a2c","name":"","func":"function DecideTargetPressure( temp, bar ) {\n    var output = 0;\n    var abort = false;\n    var direction;\n\n    switch( true ) {\n        case temp < 50:\n                abort = true;\n        break;\n        case temp >= 50 && temp <= 55:\n            output = 14;\n        break;\n        case temp >= 55 && temp <= 60:\n            output = 16;\n        break;\n        case temp >= 60 && temp <= 65:\n            output = 18;\n        break;\n        case temp >= 65 && temp <= 70:\n            output = 20;\n        break;\n        case temp >= 70 && temp <= 75:\n            output = 22;\n        break;\n        case temp >= 75 && temp <= 80:\n            output = 24;\n        break;\n        case temp >= 80 && temp <= 85:\n            output = 26;\n        break;\n        case temp >= 85 && temp <= 90:\n            output = 28;\n        break;\n        case temp >= 90 && temp <= 95:\n            output = 30;\n        break;\n        case temp > 95:\n            abort = true;\n        break;\n    }\n\n\n    // Decide Bar will Up or Down\n\n    if ( output < bar ) {\n        direction = 'up'\n    } else {\n        direction = 'down'\n    }\n    return {\n        output,\n        abort,\n        direction\n    }\n}\n\nconsole.log ( DecideTargetPressure( 96 ) )","outputs":1,"noerr":0,"x":850,"y":780,"wires":[[]]},{"id":"9346f2e9.03741","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"T1\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":380,"wires":[[]]},{"id":"895300c4.babcb","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"75","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":380,"wires":[["9346f2e9.03741"]]},{"id":"f138c048.7eb16","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":420,"wires":[["6d56c463.ede01c"]]},{"id":"e8f63721.52a108","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":460,"wires":[["b56f92fb.e2022"]]},{"id":"68ae2ee3.58fc7","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":500,"wires":[["549bc119.f15ba"]]},{"id":"6d56c463.ede01c","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"T3\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":420,"wires":[[]]},{"id":"b56f92fb.e2022","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"P1\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":460,"wires":[[]]},{"id":"549bc119.f15ba","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"P2\",msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":500,"wires":[[]]},{"id":"75683471.92ce1c","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":80,"wires":[["2d6680b5.37ece"]]},{"id":"2d6680b5.37ece","type":"function","z":"514f73fb.138a2c","name":"T1 > 70   -   R1-ON","func":"var data    =   global.get(\"T1\")\nif (data > 70) {\n    global.set(\"R1\",false)\n    msg.payload = true\n    return msg;\n}\nelse {\n    msg.payload = false\n    return msg;\n}","outputs":1,"noerr":0,"x":270,"y":80,"wires":[["f696469f.05b9c8"]]},{"id":"f696469f.05b9c8","type":"delay","z":"514f73fb.138a2c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":80,"wires":[["49a9e6ee.35e5c8","b12a43d.875bac"]]},{"id":"49a9e6ee.35e5c8","type":"debug","z":"514f73fb.138a2c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":570,"y":120,"wires":[]},{"id":"7e605bf6.9d1a64","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"65","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":340,"wires":[["9346f2e9.03741"]]},{"id":"100411f3.8a343e","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":540,"wires":[["7be5f0dd.8c3f2"]]},{"id":"7be5f0dd.8c3f2","type":"function","z":"514f73fb.138a2c","name":"Relay","func":"global.set(\"R1\",true)\nglobal.set(\"R2\",true)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":540,"wires":[[]]},{"id":"6d918967.7ffb98","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":580,"wires":[["67793af6.86dcc4"]]},{"id":"67793af6.86dcc4","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"driver\",0)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":580,"wires":[[]]},{"id":"7b7d51a7.e874b","type":"rpi-gpio out","z":"514f73fb.138a2c","name":"R1","pin":"7","set":"","level":"0","freq":"","out":"out","x":1550,"y":40,"wires":[]},{"id":"cec5714.238029","type":"rpi-gpio out","z":"514f73fb.138a2c","name":"R2","pin":"11","set":"","level":"0","freq":"","out":"out","x":1550,"y":140,"wires":[]},{"id":"94721772.b6efe8","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"R1","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":1370,"y":40,"wires":[["7b7d51a7.e874b","95593e43.aed09"]]},{"id":"8292a50e.e5a528","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"R2","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":1370,"y":140,"wires":[["cec5714.238029","6f6bb387.b16a4c"]]},{"id":"54c96c9b.f32c64","type":"debug","z":"514f73fb.138a2c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":730,"y":220,"wires":[]},{"id":"b12a43d.875bac","type":"function","z":"514f73fb.138a2c","name":"set driver  \"5\"","func":"var data = msg.payload\nif (data === true) {\n    global.set(\"driver\",5)\n    msg.payload = true\n    return msg;\n    \n}","outputs":1,"noerr":0,"x":590,"y":80,"wires":[["bf9935c2.fa5708"]]},{"id":"bf9935c2.fa5708","type":"delay","z":"514f73fb.138a2c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":740,"y":80,"wires":[["468802e9.f91b7c","54c96c9b.f32c64"]]},{"id":"468802e9.f91b7c","type":"function","z":"514f73fb.138a2c","name":"R2-ON","func":"var data = msg.payload\nif (data === true) {\n    global.set(\"R2\",false)\n    msg.payload = true\n    return msg;\n    \n}","outputs":1,"noerr":0,"x":890,"y":80,"wires":[["88cfedb4.b15b3","4adea582.c8508c"]]},{"id":"88cfedb4.b15b3","type":"delay","z":"514f73fb.138a2c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":80,"wires":[["94c7fb3c.307dc8"]]},{"id":"94c7fb3c.307dc8","type":"function","z":"514f73fb.138a2c","name":"R2-OFF","func":"var data = msg.payload\nif (data === true) {\n    global.set(\"R2\",true)\n    msg.payload = true\n    return msg;\n    \n}","outputs":1,"noerr":0,"x":1180,"y":80,"wires":[[]]},{"id":"95593e43.aed09","type":"function","z":"514f73fb.138a2c","name":"","func":"var data = msg.payload\nif (data === true) {\n    msg.payload = \"Kapalı\"\n    return msg;\n}\nelse if (data === false) {\n    msg.payload = \"Açık\"\n    return msg;\n}\n","outputs":1,"noerr":0,"x":1520,"y":100,"wires":[["3b0438b0.b80d98"]]},{"id":"6f6bb387.b16a4c","type":"function","z":"514f73fb.138a2c","name":"","func":"var data = msg.payload\nif (data === true) {\n    msg.payload = \"Kapalı\"\n    return msg;\n}\nelse if (data === false) {\n    msg.payload = \"Açık\"\n    return msg;\n}\n","outputs":1,"noerr":0,"x":1530,"y":200,"wires":[["931c036a.f770d"]]},{"id":"3b0438b0.b80d98","type":"ui_text","z":"514f73fb.138a2c","group":"44e038.33342fc8","order":1,"width":0,"height":0,"name":"","label":"R1","format":"{{msg.payload}}","layout":"row-spread","x":1650,"y":100,"wires":[]},{"id":"931c036a.f770d","type":"ui_text","z":"514f73fb.138a2c","group":"44e038.33342fc8","order":2,"width":0,"height":0,"name":"","label":"R2","format":"{{msg.payload}}","layout":"row-spread","x":1650,"y":200,"wires":[]},{"id":"5201384a.2467f8","type":"ui_gauge","z":"514f73fb.138a2c","name":"","group":"f774590.49e75a8","order":1,"width":"4","height":"4","gtype":"gage","title":"T1","label":"units","format":"{{value}}","min":0,"max":"120","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":270,"y":740,"wires":[]},{"id":"8ab1c3b5.edec2","type":"ui_gauge","z":"514f73fb.138a2c","name":"","group":"f774590.49e75a8","order":2,"width":"4","height":"4","gtype":"gage","title":"T3","label":"units","format":"{{value}}","min":0,"max":"120","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":270,"y":780,"wires":[]},{"id":"7aa7183f.2e7fb8","type":"ui_gauge","z":"514f73fb.138a2c","name":"","group":"f774590.49e75a8","order":3,"width":"4","height":"4","gtype":"gage","title":"P1","label":"units","format":"{{value}}","min":0,"max":"40","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":270,"y":820,"wires":[]},{"id":"b52cba8a.bf0568","type":"ui_gauge","z":"514f73fb.138a2c","name":"","group":"f774590.49e75a8","order":4,"width":"4","height":"4","gtype":"gage","title":"P2","label":"units","format":"{{value}}","min":0,"max":"40","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":270,"y":860,"wires":[]},{"id":"8fc59281.c6bc","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"T1","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":740,"wires":[["5201384a.2467f8"]]},{"id":"7f581d16.409c14","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"T3","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":780,"wires":[["8ab1c3b5.edec2"]]},{"id":"54ceaa77.1cb004","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"P1","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":820,"wires":[["7aa7183f.2e7fb8"]]},{"id":"e9fcf15b.4e90a","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"P2","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":860,"wires":[["b52cba8a.bf0568"]]},{"id":"caaec8d5.7522a8","type":"ui_gauge","z":"514f73fb.138a2c","name":"","group":"f774590.49e75a8","order":4,"width":"4","height":"4","gtype":"gage","title":"Sürücü","label":"units","format":"{{value}}","min":0,"max":"60","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":280,"y":900,"wires":[]},{"id":"6d1ff39f.da3c7c","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"driver","payloadType":"global","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":900,"wires":[["caaec8d5.7522a8"]]},{"id":"cbd5b69e.882438","type":"inject","z":"514f73fb.138a2c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":620,"wires":[["24bd51e2.4d250e"]]},{"id":"24bd51e2.4d250e","type":"function","z":"514f73fb.138a2c","name":"","func":"global.set(\"T1\",0)\nglobal.set(\"T3\",0)\nglobal.set(\"P1\",0)\nglobal.set(\"P2\",0)\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":620,"wires":[[]]},{"id":"44e038.33342fc8","type":"ui_group","z":"","name":"Röle Durumları","tab":"81618b12.014c48","order":1,"disp":true,"width":"6","collapse":false},{"id":"f774590.49e75a8","type":"ui_group","z":"","name":"Sensör Verileri","tab":"81618b12.014c48","order":2,"disp":true,"width":"20","collapse":false},{"id":"81618b12.014c48","type":"ui_tab","name":"Tab 1","icon":"dashboard","order":1}]